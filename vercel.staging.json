{
  "version": 2,
  "env": {
    "NODE_ENV": "staging",
    "DOMAIN": "staging.dnb1st.ru",
    "NEXT_PUBLIC_APP_URL": "https://staging.dnb1st.ru",
    "NEXT_PUBLIC_API_URL": "https://staging.dnb1st.ru/api",
    "NEXTAUTH_URL": "https://staging.dnb1st.ru",
    "NEXTAUTH_SECRET": "@nextauth_secret_staging",
    "DATABASE_URL": "@database_url_staging",
    "SOLANA_RPC_URL": "@solana_rpc_url_staging",
    "REDIS_URL": "@redis_url_staging",
    "LOG_LEVEL": "warn",
    "ENABLE_DEBUG": "false",
    "ENABLE_MOCK_DATA": "false",
    "HOT_RELOAD": "false",
    "CACHE_ENABLED": "true",
    "ANALYTICS_ENABLED": "true",
    "MONITORING_ENABLED": "true",
    "RATE_LIMITING_ENABLED": "true",
    "SSL_ENABLED": "true",
    "HSTS_ENABLED": "true",
    "SENTRY_DSN": "@sentry_dsn_staging",
    "NEXT_PUBLIC_SENTRY_DSN": "@sentry_dsn_staging",
    "VERCEL_ANALYTICS_ENABLED": "true",
    "SENTRY_USER": "@sentry_user_staging",
    "SENTRY_USER_EMAIL": "@sentry_user_email_staging"
  },
  "analytics": {
    "enabled": true,
    "performance": {
      "enabled": true,
      "coreWebVitals": {
        "enabled": true,
        "trackLCP": true,
        "trackFID": true,
        "trackCLS": true,
        "trackFCP": true,
        "trackTBT": true,
        "trackINP": true,
        "trackTTFB": true
      },
      "customMetrics": {
        "enabled": true,
        "trackPageLoad": true,
        "trackRouteChanges": true,
        "trackApiCalls": true,
        "trackUserInteractions": true
      }
    },
    "realUserMonitoring": {
      "enabled": true,
      "sampleRate": 50,
      "trackUserAgent": true,
      "trackViewport": true,
      "trackDeviceType": true,
      "trackConnectionType": true
    },
    "errorTracking": {
      "enabled": true,
      "trackJavaScriptErrors": true,
      "trackUnhandledRejections": true,
      "trackResourceErrors": true,
      "trackWebVitalsErrors": true
    },
    "events": {
      "enabled": true,
      "trackPageViews": true,
      "trackClicks": true,
      "trackFormSubmissions": true,
      "trackCustomEvents": true
    },
    "sampling": {
      "enabled": true,
      "sampleRate": 50,
      "sessionSampleRate": 50
    },
    "retention": {
      "dataRetentionDays": 30,
      "aggregateDataRetentionDays": 90
    },
    "privacy": {
      "anonymizeIP": true,
      "maskUserData": true,
      "respectDoNotTrack": true,
      "consentMode": "granted"
    }
  },
  "caching": {
    "maxAge": 3600,
    "staleWhileRevalidate": 1800
  },
  "compression": {
    "brotli": true,
    "gzip": true
  },
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "X-Frame-Options",
          "value": "DENY"
        },
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        },
        {
          "key": "X-XSS-Protection",
          "value": "1; mode=block"
        },
        {
          "key": "Referrer-Policy",
          "value": "strict-origin-when-cross-origin"
        },
        {
          "key": "Permissions-Policy",
          "value": "camera=(), microphone=(), geolocation=()"
        },
        {
          "key": "Cache-Control",
          "value": "public, max-age=3600, immutable"
        }
      ]
    },
    {
      "source": "/api/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "no-cache, no-store, must-revalidate"
        },
        {
          "key": "Pragma",
          "value": "no-cache"
        },
        {
          "key": "Expires",
          "value": "0"
        },
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        }
      ]
    }
  ],
  "rewrites": [
    {
      "source": "/api/(.*)",
      "destination": "/api/$1"
    },
    {
      "source": "/socket.io",
      "destination": "/api/socketio"
    }
  ],
  "trailingSlash": false,
  "functions": {
    "src/app/api/**/*.ts": {
      "maxDuration": 30,
      "memory": 768
    },
    "src/app/api/**/*.js": {
      "maxDuration": 30,
      "memory": 768
    }
  },
  "crons": [
    {
      "path": "/api/recommendations",
      "schedule": "0 */6 * * *"
    },
    {
      "path": "/api/analytics",
      "schedule": "0 0 * * *"
    },
    {
      "path": "/api/cleanup",
      "schedule": "0 2 * * *"
    },
    {
      "path": "/api/monitoring/health",
      "schedule": "*/10 * * * *"
    }
  ]
}