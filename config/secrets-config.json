{
  "version": "1.1.0",
  "project": "NORMALDANCE",
  "description": "Безопасная конфигурация управления секретами для NORMALDANCE проекта с шифрованием",
  "encryption": {
    "enabled": true,
    "provider": "dotenv-vault",
    "vaultFile": ".env.vault",
    "kms": {
      "enabled": true,
      "provider": "gcp-secret-manager",
      "keyRing": "normal-dance-prod",
      "keyName": "secrets-encryption-key",
      "rotationInterval": 90
    }
  },
  "environments": {
    "development": {
      "name": "Development",
      "description": "Окружение для разработки и тестирования",
      "autoSync": true,
      "validateBeforeDeploy": true,
      "platforms": ["render", "vercel", "railway"],
      "secretsSource": "local",
      "secrets": [
        {
          "name": "DATABASE_URL",
          "description": "URL базы данных для разработки",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^postgresql:\\/\\/[^:]+:[^@]+@[^:]+:\\d+\\/[\\w-]+$",
            "forbiddenValues": ["", "null", "undefined"],
            "forbiddenPatterns": [
              "postgres://postgres:postgres@",
              "postgres://root:root@",
              "localhost",
              "127.0.0.1",
              "::1"
            ]
          }
        },
        {
          "name": "UPSTASH_REDIS_REST_URL",
          "description": "URL для Upstash Redis REST API",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https:\\/\\/[^\\s]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "UPSTASH_REDIS_REST_TOKEN",
          "description": "Токен для аутентификации с Upstash Redis",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "QSTASH_URL",
          "description": "URL для QStash (Upstash Queue)",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https:\\/\\/[^\\s]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "QSTASH_TOKEN",
          "description": "Токен для аутентификации с QStash",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "QSTASH_CURRENT_SIGNING_KEY",
          "description": "Текущий ключ подписи для QStash",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 5,
            "maxLength": 2048,
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "QSTASH_NEXT_SIGNING_KEY",
          "description": "Следующий ключ подписи для QStash",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 5,
            "maxLength": 2048,
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "NEXTAUTH_SECRET",
          "description": "Секрет для NextAuth.js",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 64,
            "maxLength": 128,
            "pattern": "^[A-Za-z0-9+/=_-]{64,}$",
            "forbiddenValues": ["", "null", "undefined", "development", "staging", "production"]
          }
        },
        {
          "name": "SUPABASE_URL",
          "description": "URL Supabase сервиса",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https:\\/\\/[^\\s]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "SUPABASE_ANON_KEY",
          "description": "Anon ключ для Supabase",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "NEXTAUTH_URL",
          "description": "URL для NextAuth callback",
          "required": true,
          "sensitive": false,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https?:\\/\\/[^\\s]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "SOLANA_RPC_URL",
          "description": "Solana RPC endpoint для Web3 операций",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https:\\/\\/.*\\.solana\\.com$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "PINATA_JWT",
          "description": "JWT токен для Pinata IPFS сервиса",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 40,
            "maxLength": 512,
            "pattern": "^eyJ[A-Za-z0-9+/=_-]+\\.[A-Za-z0-9+/=_-]+\\.[A-Za-z0-9+/=_-]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "ANCHOR_WALLET",
          "description": "Base64-encoded keypair для деплоя Solana программ",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 80,
            "maxLength": 200,
            "pattern": "^[A-Za-z0-9+/=]{80,}$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        }
      ]
    },
    "staging": {
      "name": "Staging",
      "description": "Стейджинговое окружение для предрелизного тестирования",
      "autoSync": true,
      "validateBeforeDeploy": true,
      "platforms": ["render", "vercel", "railway"],
      "secretsSource": "gcp-secret-manager://normal-dance-staging",
      "secrets": [
        {
          "name": "DATABASE_URL",
          "description": "URL базы данных для staging",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^postgresql:\\/\\/[^:]+:[^@]+@[^:]+:\\d+\\/[\\w-]+$",
            "forbiddenValues": ["", "null", "undefined"],
            "forbiddenPatterns": [
              "postgres://postgres:postgres@",
              "postgres://root:root@",
              "localhost",
              "127.0.0.1",
              "::1"
            ]
          }
        },
        {
          "name": "UPSTASH_REDIS_REST_URL",
          "description": "URL для Upstash Redis REST API",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https:\\/\\/[^\\s]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "UPSTASH_REDIS_REST_TOKEN",
          "description": "Токен для аутентификации с Upstash Redis",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "QSTASH_URL",
          "description": "URL для QStash (Upstash Queue)",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https:\\/\\/[^\\s]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "QSTASH_TOKEN",
          "description": "Токен для аутентификации с QStash",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "QSTASH_CURRENT_SIGNING_KEY",
          "description": "Текущий ключ подписи для QStash",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 5,
            "maxLength": 2048,
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "QSTASH_NEXT_SIGNING_KEY",
          "description": "Следующий ключ подписи для QStash",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 5,
            "maxLength": 2048,
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "NEXTAUTH_SECRET",
          "description": "Секрет для NextAuth.js",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 64,
            "maxLength": 128,
            "pattern": "^[A-Za-z0-9+/=_-]{64,}$",
            "forbiddenValues": ["", "null", "undefined", "development", "staging", "production"]
          }
        },
        {
          "name": "SUPABASE_URL",
          "description": "URL Supabase сервиса",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https:\\/\\/[^\\s]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "SUPABASE_ANON_KEY",
          "description": "Anon ключ для Supabase",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "NEXTAUTH_URL",
          "description": "URL для NextAuth callback",
          "required": true,
          "sensitive": false,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https?:\\/\\/[^\\s]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "SOLANA_RPC_URL",
          "description": "Solana RPC endpoint для Web3 операций",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https:\\/\\/.*\\.solana\\.com$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "PINATA_JWT",
          "description": "JWT токен для Pinata IPFS сервиса",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 40,
            "maxLength": 512,
            "pattern": "^eyJ[A-Za-z0-9+/=_-]+\\.[A-Za-z0-9+/=_-]+\\.[A-Za-z0-9+/=_-]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "ANCHOR_WALLET",
          "description": "Base64-encoded keypair для деплоя Solana программ",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 80,
            "maxLength": 200,
            "pattern": "^[A-Za-z0-9+/=]{80,}$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        }
      ]
    },
    "production": {
      "name": "Production",
      "description": "Продакшн окружение для живого приложения",
      "autoSync": true,
      "validateBeforeDeploy": true,
      "platforms": ["render", "vercel", "railway"],
      "secretsSource": "gcp-secret-manager://normal-dance-prod",
      "secrets": [
        {
          "name": "DATABASE_URL",
          "description": "URL базы данных для production",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^postgresql:\\/\\/[^:]+:[^@]+@[^:]+:\\d+\\/[\\w-]+$",
            "forbiddenValues": ["", "null", "undefined"],
            "forbiddenPatterns": [
              "postgres://postgres:postgres@",
              "postgres://root:root@",
              "localhost",
              "127.0.0.1",
              "::1"
            ]
          }
        },
        {
          "name": "UPSTASH_REDIS_REST_URL",
          "description": "URL для Upstash Redis REST API",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https:\\/\\/[^\\s]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "UPSTASH_REDIS_REST_TOKEN",
          "description": "Токен для аутентификации с Upstash Redis",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "QSTASH_URL",
          "description": "URL для QStash (Upstash Queue)",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https:\\/\\/[^\\s]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "QSTASH_TOKEN",
          "description": "Токен для аутентификации с QStash",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "QSTASH_CURRENT_SIGNING_KEY",
          "description": "Текущий ключ подписи для QStash",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 5,
            "maxLength": 2048,
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "QSTASH_NEXT_SIGNING_KEY",
          "description": "Следующий ключ подписи для QStash",
          "required": false,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 5,
            "maxLength": 2048,
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "NEXTAUTH_SECRET",
          "description": "Секрет для NextAuth.js",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 64,
            "maxLength": 128,
            "pattern": "^[A-Za-z0-9+/=_-]{64,}$",
            "forbiddenValues": ["", "null", "undefined", "development", "staging", "production"]
          }
        },
        {
          "name": "SUPABASE_URL",
          "description": "URL Supabase сервиса",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https:\\/\\/[^\\s]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "SUPABASE_ANON_KEY",
          "description": "Anon ключ для Supabase",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "NEXTAUTH_URL",
          "description": "URL для NextAuth callback",
          "required": true,
          "sensitive": false,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https?:\\/\\/[^\\s]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "SOLANA_RPC_URL",
          "description": "Solana RPC endpoint для Web3 операций",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 10,
            "maxLength": 2048,
            "pattern": "^https:\\/\\/.*\\.solana\\.com$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "PINATA_JWT",
          "description": "JWT токен для Pinata IPFS сервиса",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 40,
            "maxLength": 512,
            "pattern": "^eyJ[A-Za-z0-9+/=_-]+\\.[A-Za-z0-9+/=_-]+\\.[A-Za-z0-9+/=_-]+$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        },
        {
          "name": "ANCHOR_WALLET",
          "description": "Base64-encoded keypair для деплоя Solana программ",
          "required": true,
          "sensitive": true,
          "platforms": ["render", "vercel", "railway"],
          "validation": {
            "minLength": 80,
            "maxLength": 200,
            "pattern": "^[A-Za-z0-9+/=]{80,}$",
            "forbiddenValues": ["", "null", "undefined"]
          }
        }
      ]
    }
  },
  "platforms": {
    "render": {
      "name": "Render",
      "description": "Платформа Render для деплоя",
      "requiredSecrets": ["DATABASE_URL", "NEXTAUTH_SECRET", "SUPABASE_URL", "SUPABASE_ANON_KEY", "NEXTAUTH_URL", "SOLANA_RPC_URL", "PINATA_JWT", "ANCHOR_WALLET"],
      "optionalSecrets": ["UPSTASH_REDIS_REST_URL", "UPSTASH_REDIS_REST_TOKEN", "QSTASH_URL", "QSTASH_TOKEN", "QSTASH_CURRENT_SIGNING_KEY", "QSTASH_NEXT_SIGNING_KEY"]
    },
    "vercel": {
      "name": "Vercel",
      "description": "Платформа Vercel для деплоя",
      "requiredSecrets": ["DATABASE_URL", "NEXTAUTH_SECRET", "SUPABASE_URL", "SUPABASE_ANON_KEY", "NEXTAUTH_URL", "SOLANA_RPC_URL", "PINATA_JWT", "ANCHOR_WALLET"],
      "optionalSecrets": ["UPSTASH_REDIS_REST_URL", "UPSTASH_REDIS_REST_TOKEN", "QSTASH_URL", "QSTASH_TOKEN", "QSTASH_CURRENT_SIGNING_KEY", "QSTASH_NEXT_SIGNING_KEY"]
    },
    "railway": {
      "name": "Railway",
      "description": "Платформа Railway для деплоя",
      "requiredSecrets": ["DATABASE_URL", "NEXTAUTH_SECRET", "SUPABASE_URL", "SUPABASE_ANON_KEY", "NEXTAUTH_URL", "SOLANA_RPC_URL", "PINATA_JWT", "ANCHOR_WALLET"],
      "optionalSecrets": ["UPSTASH_REDIS_REST_URL", "UPSTASH_REDIS_REST_TOKEN", "QSTASH_URL", "QSTASH_TOKEN", "QSTASH_CURRENT_SIGNING_KEY", "QSTASH_NEXT_SIGNING_KEY"]
    }
  },
  "security": {
    "encryption": {
      "enabled": true,
      "algorithm": "AES-256-GCM",
      "keyRotationInterval": 90,
      "keyRotationEnabled": true
    },
    "audit": {
      "enabled": true,
      "logLevel": "info",
      "retentionPeriod": 365,
      "includeSensitiveData": false,
      "logSecretHashes": true,
      "hashAlgorithm": "sha256",
      "hashLength": 8
    },
    "access": {
      "requireAuthentication": true,
      "ipWhitelist": [
        "192.168.1.0/24",
        "10.0.0.0/8",
        "172.16.0.0/12",
        "YOUR_OFFICE_IP/32",
        "YOUR_HOME_IP/32"
      ],
      "rateLimiting": {
        "enabled": true,
        "requestsPerMinute": 10,
        "burstSize": 3
      }
    }
 },
  "notifications": {
    "enabled": true,
    "channels": {
      "email": {
        "enabled": false,
        "recipients": []
      },
      "slack": {
        "enabled": true,
        "webhookUrl": "${SLACK_WEBHOOK}",
        "channel": "#security-alerts"
      },
      "discord": {
        "enabled": false,
        "webhookUrl": ""
      }
    },
    "events": {
      "secretAdded": true,
      "secretUpdated": true,
      "secretDeleted": true,
      "syncCompleted": true,
      "validationFailed": true,
      "authenticationFailed": true,
      "keyRotationDue": true,
      "keyRotated": true,
      "ipBlocked": true,
      "rateLimitExceeded": true
    }
 },
  "monitoring": {
    "enabled": true,
    "metrics": {
      "secretAccessCount": true,
      "secretModificationCount": true,
      "validationFailureCount": true,
      "syncFailureCount": true,
      "authenticationFailureCount": true
    },
    "alerts": {
      "enabled": true,
      "thresholds": {
        "validationFailures": 10,
        "syncFailures": 5,
        "authenticationFailures": 3
      }
    }
 }
}
